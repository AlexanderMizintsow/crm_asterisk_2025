# üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è CRM —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–≤–æ–Ω–∫–∞–º–∏

## üìã –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–≤–æ–Ω–∫–∞–º–∏ —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π Asterisk AMI –∏ WebSocket –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏.

### üéØ –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

**–ù–æ–≤–∞—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞:**

1. **–í—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫** ‚Üí –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ (–±–µ–∑ –∫–Ω–æ–ø–æ–∫ –ø—Ä–∏–Ω—è—Ç–∏—è/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è)
2. **–ü–æ–¥–Ω—è—Ç–∏–µ —Ç—Ä—É–±–∫–∏** ‚Üí –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Ö–æ–¥ –≤ –∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º
3. **–ê–∫—Ç–∏–≤–Ω—ã–π –∑–≤–æ–Ω–æ–∫** ‚Üí –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∞–º–∏ –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ–º

**üîí –ò–∑–æ–ª—è—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**

- ‚úÖ **–ó–≤–æ–Ω–æ–∫ –Ω–∞ –Ω–æ–º–µ—Ä 777** ‚Üí –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ **—Ç–æ–ª—å–∫–æ –¥–ª—è –ò–≤–∞–Ω–æ–≤–∞ (ID: 1)**
- ‚úÖ **–ó–≤–æ–Ω–æ–∫ –Ω–∞ –Ω–æ–º–µ—Ä 888** ‚Üí –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ **—Ç–æ–ª—å–∫–æ –¥–ª—è –ü–µ—Ç—Ä–æ–≤–∞ (ID: 2)**
- ‚úÖ **–î—Ä—É–≥–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ù–ï –≤–∏–¥—è—Ç** —á—É–∂–∏–µ –∑–≤–æ–Ω–∫–∏
- ‚úÖ **–¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤ (ID: 1)**

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**

- ‚úÖ –£—á–∏—Ç—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–π —Ä–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å (–ø—Ä–∏–Ω—è—Ç–∏–µ —Å —Å—Ç–∞—Ü–∏–æ–Ω–∞—Ä–Ω–æ–≥–æ —Ç–µ–ª–µ—Ñ–æ–Ω–∞)
- ‚úÖ –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –±–µ–∑ –ª–∏—à–Ω–∏—Ö –∫–Ω–æ–ø–æ–∫
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–æ–≤
- ‚úÖ –£–¥–æ–±–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∞–º–∏ –≤–æ –≤—Ä–µ–º—è —Ä–∞–∑–≥–æ–≤–æ—Ä–∞

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ—Ä—Ç–æ–≤

| –°–µ—Ä–≤–∏—Å               | –ü–æ—Ä—Ç | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                  |
| -------------------- | ---- | --------------------------- |
| **WebSocket —Å–µ—Ä–≤–µ—Ä** | 3771 | API –∏ WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è  |
| **Asterisk AMI**     | 5038 | –í–Ω–µ—à–Ω–∏–π Asterisk —Å–µ—Ä–≤–µ—Ä     |
| **Vite dev —Å–µ—Ä–≤–µ—Ä**  | 5179 | –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è |
| **PostgreSQL**       | 5432 | –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö                 |

## üöÄ –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
npm install
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
node server/setup-database.js
```

### 3. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–æ–≤

```bash
npm run servers
```

### 4. –ó–∞–ø—É—Å–∫ –∫–ª–∏–µ–Ω—Ç–∞ (–≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)

```bash
npm run dev
```

## üìû –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ï–¥–∏–Ω—ã–π —Ç–µ—Å—Ç –∑–≤–æ–Ω–∫–æ–≤:

**–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∞:**

```bash
node server/testCall.js
```

**–õ–æ–≥–∏–∫–∞ —Ç–µ—Å—Ç–∞:**

1. **–ó–≤–æ–Ω–æ–∫ –Ω–∞ –Ω–æ–º–µ—Ä 777** ‚Üí –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
2. **–ß–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥** ‚Üí –ü—Ä–∏–Ω—è—Ç–∏–µ –∑–≤–æ–Ω–∫–∞ 777
3. **–ß–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥** ‚Üí –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–≤–æ–Ω–∫–∞ 777
4. **–ß–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã** ‚Üí –ó–≤–æ–Ω–æ–∫ –Ω–∞ –Ω–æ–º–µ—Ä 888
5. **–ß–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥** ‚Üí –ü—Ä–∏–Ω—è—Ç–∏–µ –∑–≤–æ–Ω–∫–∞ 888
6. **–ß–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥** ‚Üí –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–≤–æ–Ω–∫–∞ 888

**–û–±—â–µ–µ –≤—Ä–µ–º—è —Ç–µ—Å—Ç–∞:** ~45 —Å–µ–∫—É–Ω–¥

**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è:**

- ‚úÖ –ò–∑–æ–ª—è—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (777 ‚Üí –ò–≤–∞–Ω, 888 ‚Üí –ü–µ—Ç—Ä)
- ‚úÖ –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –∑–≤–æ–Ω–∫–∞ (–≤—Ö–æ–¥—è—â–∏–π ‚Üí –ø—Ä–∏–Ω—è—Ç–∏–µ ‚Üí –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ –±–∞–∑–µ

## üéØ –†–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:

1. **–í—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫**

   - –ü–æ—è–≤–ª—è–µ—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ –æ–∫–Ω–æ —Å –¥–∞–Ω–Ω—ã–º–∏ –∑–≤–æ–Ω—è—â–µ–≥–æ
   - –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–æ–º–µ—Ä, –∫–æ–º–ø–∞–Ω–∏—è (–µ—Å–ª–∏ –µ—Å—Ç—å –≤ –ë–î)
   - –ú–æ–∂–Ω–æ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –∑–∞–º–µ—Ç–∫–∏ –∑–∞—Ä–∞–Ω–µ–µ

2. **–ü–æ–¥–Ω—è—Ç–∏–µ —Ç—Ä—É–±–∫–∏**

   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Ö–æ–¥ –≤ –∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º
   - –ü–æ—è–≤–ª—è–µ—Ç—Å—è –∫–∞—Ä—Ç–æ—á–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∑–≤–æ–Ω–∫–∞
   - –î–æ—Å—Ç—É–ø–Ω–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∞–º–∏, —Ç–µ–≥–∞–º–∏, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º

3. **–ê–∫—Ç–∏–≤–Ω—ã–π –∑–≤–æ–Ω–æ–∫**

   - –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–ª–∏–µ–Ω—Ç–µ
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–º–µ—Ç–æ–∫ –≤–æ –≤—Ä–µ–º—è —Ä–∞–∑–≥–æ–≤–æ—Ä–∞
   - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ—Å—Ç–∞–≤–∏—Ç—å –Ω–∞ –æ–∂–∏–¥–∞–Ω–∏–µ, –ø–µ—Ä–µ–≤–µ—Å—Ç–∏

4. **–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–≤–æ–Ω–∫–∞ (–ø–æ–ª–æ–∂–µ–Ω–∏–µ —Ç—Ä—É–±–∫–∏)**

   - –û–∫–Ω–æ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∑–≤–æ–Ω–∫–∞ **–æ—Å—Ç–∞–µ—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç—ã–º**
   - –°—Ç–∞—Ç—É—Å –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ "–ó–≤–æ–Ω–æ–∫ –∑–∞–≤–µ—Ä—à–µ–Ω"
   - –ü–æ—è–≤–ª—è–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ "–ó–∞–≤–µ—Ä—à–∏—Ç—å –∏ –∑–∞–∫—Ä—ã—Ç—å"
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∑–∞–≤–µ—Ä—à–∏—Ç—å –≤–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö

5. **–†—É—á–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ**
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
   - –ó–∞–ø–∏—Å—å –≤ –∏—Å—Ç–æ—Ä–∏—é –∑–≤–æ–Ω–∫–æ–≤
   - –ó–∞–∫—Ä—ã—Ç–∏–µ –æ–∫–Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∑–≤–æ–Ω–∫–∞

## üîå WebSocket —Å–æ–±—ã—Ç–∏—è

### –ö–ª–∏–µ–Ω—Ç ‚Üí –°–µ—Ä–≤–µ—Ä:

- `authenticate` - –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `incoming-call` - —ç–º—É–ª—è—Ü–∏—è –≤—Ö–æ–¥—è—â–µ–≥–æ –∑–≤–æ–Ω–∫–∞
- `answer-call` - –ø—Ä–∏–Ω—è—Ç–∏–µ/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –∑–≤–æ–Ω–∫–∞
- `end-call` - –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–≤–æ–Ω–∫–∞
- `update-call-notes` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–º–µ—Ç–æ–∫

### –°–µ—Ä–≤–µ—Ä ‚Üí –ö–ª–∏–µ–Ω—Ç:

- `incoming-call` - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –≤—Ö–æ–¥—è—â–µ–º –∑–≤–æ–Ω–∫–µ
- `call-answered` - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø—Ä–∏–Ω—è—Ç–∏—è/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è
- `call-ended` - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∑–≤–æ–Ω–∫–∞ (–ø–æ–ª–æ–∂–µ–Ω–∏–µ —Ç—Ä—É–±–∫–∏)
- `active-calls` - —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–≤–æ–Ω–∫–æ–≤
- `notes-updated` - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–º–µ—Ç–æ–∫

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:

- `users` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã
- `calls` - –∏—Å—Ç–æ—Ä–∏—è –∑–≤–æ–Ω–∫–æ–≤
- `user_phones` - –ø—Ä–∏–≤—è–∑–∫–∞ –Ω–æ–º–µ—Ä–æ–≤ –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
- `companies` - –∫–æ–º–ø–∞–Ω–∏–∏
- `phone_numbers_companies` - –Ω–æ–º–µ—Ä–∞ –∫–æ–º–ø–∞–Ω–∏–π

## üõ†Ô∏è –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º–∞: "–°–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã
npm run servers
```

### –ü—Ä–æ–±–ª–µ–º–∞: "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω"

```bash
# –ü–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
node server/setup-database.js
```

### –ü—Ä–æ–±–ª–µ–º–∞: "–ü–æ—Ä—Ç –∑–∞–Ω—è—Ç"

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ
npm run servers
```

## üì± –î–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é

- **–ö–ª–∏–µ–Ω—Ç:** http://localhost:5179
- **API:** http://localhost:3771/api
- **WebSocket:** ws://localhost:3771

## üéâ –ì–æ—Ç–æ–≤–æ!

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–æ–π —Ä–∞–±–æ—Ç—ã, —É—á–∏—Ç—ã–≤–∞—é—â–µ–π —Ä–µ–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–∏–Ω—è—Ç–∏—è –∑–≤–æ–Ω–∫–æ–≤ —á–µ—Ä–µ–∑ —Å—Ç–∞—Ü–∏–æ–Ω–∞—Ä–Ω—ã–µ —Ç–µ–ª–µ—Ñ–æ–Ω—ã.
