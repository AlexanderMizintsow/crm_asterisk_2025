# üß™ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é —Å–∏—Å—Ç–µ–º—ã –∑–≤–æ–Ω–∫–æ–≤

## üéØ –¶–µ–ª—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–≠–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –∑–≤–æ–Ω–æ–∫ –Ω–∞ –Ω–æ–º–µ—Ä 777 –∏ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ò–≤–∞–Ω–æ–≤—É.

## üìã –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

```bash
cd server
node setup-test-data.js
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞—Å—Ç:

- üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤
- üìû –ù–æ–º–µ—Ä: 777 (–ø—Ä–∏–≤—è–∑–∞–Ω –∫ –ò–≤–∞–Ω–æ–≤—É)
- üè¢ –ö–æ–º–ø–∞–Ω–∏—é: –û–û–û –¢–µ—Å—Ç–æ–≤–∞—è –ö–æ–º–ø–∞–Ω–∏—è
- üì± –ù–æ–º–µ—Ä –∑–≤–æ–Ω—è—â–µ–≥–æ: +7 (495) 123-45-67

### 2. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–æ–≤

```bash
# –í –∫–æ—Ä–Ω–µ–≤–æ–π –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞
npm run servers
```

–î–æ–ª–∂–Ω—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è:

- ‚úÖ WebSocket —Å–µ—Ä–≤–µ—Ä –Ω–∞ –ø–æ—Ä—Ç—É 3771
- ‚úÖ Asterisk —Å–µ—Ä–≤–µ—Ä (–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ AMI)

### 3. –ó–∞–ø—É—Å–∫ React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
# –í –Ω–æ–≤–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
npm run dev
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –Ω–∞: http://localhost:5173

## üß™ –í–∞—Ä–∏–∞–Ω—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
cd server
node simple-call-test.js
```

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç:**

1. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
2. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–∞–∫ –ò–≤–∞–Ω–æ–≤
3. –≠–º—É–ª—è—Ü–∏—è –∑–≤–æ–Ω–∫–∞ –Ω–∞ –Ω–æ–º–µ—Ä 777
4. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π

```bash
cd server
node test-scenario.js
```

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç:**

1. –í—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫
2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–Ω—è—Ç–∏–µ —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
3. –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–≤–æ–Ω–∫–∞ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
4. –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 3: –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
cd server
node testCall.js
```

–ü—Ä–æ—Å—Ç–∞—è —ç–º—É–ª—è—Ü–∏—è –∑–≤–æ–Ω–∫–∞ –±–µ–∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π.

## üîç –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å

### –í –∫–æ–Ω—Å–æ–ª–∏ —Å–µ—Ä–≤–µ—Ä–∞:

```
üîµ [INFO] –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∑–≤–æ–Ω–∫–∞ { caller: '+7 (495) 123-45-67', receiver: '777' }
üü¢ [–£–°–ü–ï–•] –ù–∞–π–¥–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–ª—è –Ω–æ–º–µ—Ä–∞ 777 { userId: 1, name: '–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤' }
üü¢ [–£–°–ü–ï–•] –ó–≤–æ–Ω–æ–∫ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é { callId: 1234567890, userId: 1, userName: '–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤' }
```

### –í –±—Ä–∞—É–∑–µ—Ä–µ (http://localhost:5173):

1. ‚úÖ –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∑–≤–æ–Ω–∫–∞
2. ‚úÖ –ù–æ–º–µ—Ä –∑–≤–æ–Ω—è—â–µ–≥–æ: +7 (495) 123-45-67
3. ‚úÖ –ö–æ–º–ø–∞–Ω–∏—è: –û–û–û –¢–µ—Å—Ç–æ–≤–∞—è –ö–æ–º–ø–∞–Ω–∏—è
4. ‚úÖ –ö–Ω–æ–ø–∫–∏ "–ü—Ä–∏–Ω—è—Ç—å" –∏ "–û—Ç–∫–ª–æ–Ω–∏—Ç—å"

### –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:

```
üîå –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ WebSocket: http://localhost:3771
‚úÖ WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω —É—Å–ø–µ—à–Ω–æ
üì• –ü–æ–ª—É—á–µ–Ω–æ WebSocket —Å–æ–±—ã—Ç–∏–µ: incoming-call (—Å –¥–∞–Ω–Ω—ã–º–∏)
```

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –û—à–∏–±–∫–∞: "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å –Ω–æ–º–µ—Ä–æ–º 777 –Ω–µ –Ω–∞–π–¥–µ–Ω"

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫—É –¥–∞–Ω–Ω—ã—Ö
node setup-test-data.js
```

### –û—à–∏–±–∫–∞: "–°–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã
npm run servers
```

### –û—à–∏–±–∫–∞: "WebSocket connection failed"

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—Ç 3771
netstat -ano | findstr :3771
```

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞

## üìä –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

### –£—Å–ø–µ—à–Ω—ã–π —Ç–µ—Å—Ç:

```
üìû –ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç –∑–≤–æ–Ω–∫–∞ –Ω–∞ –Ω–æ–º–µ—Ä 777
üéØ –≠–º—É–ª–∏—Ä—É–µ–º –∑–≤–æ–Ω–æ–∫ –æ—Ç +7 (495) 123-45-67 –Ω–∞ –Ω–æ–º–µ—Ä 777 (–ò–≤–∞–Ω–æ–≤)
‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
üë§ –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–∞–∫: –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤ (ID: 1)
‚úÖ –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞

üìû –≠–ú–£–õ–Ø–¶–ò–Ø –í–•–û–î–Ø–©–ï–ì–û –ó–í–û–ù–ö–ê
üì± –û—Ç: +7 (495) 123-45-67
üìû –ù–∞: 777 (–ò–≤–∞–Ω–æ–≤)

üéâ –£–í–ï–î–û–ú–õ–ï–ù–ò–ï –û –ó–í–û–ù–ö–ï –ü–û–õ–£–ß–ï–ù–û!
üìã –î–∞–Ω–Ω—ã–µ –∑–≤–æ–Ω–∫–∞: { id: 1234567890, caller: '+7 (495) 123-45-67', receiver: '777', company: '–û–û–û –¢–µ—Å—Ç–æ–≤–∞—è –ö–æ–º–ø–∞–Ω–∏—è', status: 'incoming' }

üí° –¢–µ–ø–µ—Ä—å –≤ –≤–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è –æ–∫–Ω–æ –∑–≤–æ–Ω–∫–∞!
üåê –û—Ç–∫—Ä–æ–π—Ç–µ: http://localhost:5173
```

## üéØ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã

1. **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞–¥—Ä–µ—Å–∞—Ü–∏—è**: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –ò–≤–∞–Ω–æ–≤—É
2. **–ü–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**: –ù–æ–º–µ—Ä, –∫–æ–º–ø–∞–Ω–∏—è, –≤—Ä–µ–º—è –∑–≤–æ–Ω–∫–∞
3. **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**: –ú–æ–∂–Ω–æ –ø—Ä–∏–Ω—è—Ç—å/–æ—Ç–∫–ª–æ–Ω–∏—Ç—å –∑–≤–æ–Ω–æ–∫
4. **–ò—Å—Ç–æ—Ä–∏—è**: –ó–≤–æ–Ω–æ–∫ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ –ë–î

## üìù –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã

### –¢–µ—Å—Ç —Å –¥—Ä—É–≥–∏–º –Ω–æ–º–µ—Ä–æ–º

–ò–∑–º–µ–Ω–∏—Ç–µ `receiver_number` –Ω–∞ "888" - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –Ω–µ –¥–æ–ª–∂–Ω–æ –ø—Ä–∏–π—Ç–∏ –ò–≤–∞–Ω–æ–≤—É.

### –¢–µ—Å—Ç –±–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

–ù–µ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –¥–æ–ª–∂–Ω—ã –ø—Ä–∏—Ö–æ–¥–∏—Ç—å.

### –¢–µ—Å—Ç —Å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º

–ò–∑–º–µ–Ω–∏—Ç–µ –Ω–æ–º–µ—Ä –Ω–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π - –≤ –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ.
